# 고수준 설계 문서 (High-Level Design)

## 1. 개요
본 문서는 AI 기반 콘텐츠 생성 웹 애플리케이션의 고수준 아키텍처, 주요 구성 요소 및 시스템 흐름을 정의한다. 사용자의 요청에 따라 LLM(거대 언어 모델)을 활용하여 동적 콘텐츠를 생성하는 것을 목표로 하며, 요구사항에 명시된 대로 서버리스 아키텍처를 기반으로 설계되었다.

## 2. 시스템 목표
- **기능 목표:**
    - 사용자가 입력한 텍스트(영어 문장, 상황)에 따라 AI가 연관 콘텐츠(예시 문장, 축하 문구)를 생성한다.
    - 기능별로 분리된 UI를 통해 사용자에게 직관적인 경험을 제공한다.
- **기술 목표:**
    - 별도의 백엔드 서버 없이 프론트엔드 중심의 기술 스택으로 MVP를 구현한다.
    - 배포 및 운영이 간편한 서버리스 아키텍처를 채택한다.
    - TDD(테스트 주도 개발)를 통해 코드의 안정성과 유지보수성을 확보한다.

## 3. 시스템 아키텍처
애플리케이션은 클라이언트, API 계층, 외부 서비스의 3-Tier 아키텍처로 구성된다.

```
+-----------------+      +------------------------+      +--------------------+
|                 |      |                        |      |                    |
|   User/Browser  |----->|  Next.js Frontend App  |----->|  External LLM API  |
| (Client)        |<-----| (Vercel/Netlify)       |<-----| (e.g., OpenAI)     |
|                 |      |   - UI Components      |      |                    |
|                 |      |   - API Routes (Proxy) |      |                    |
+-----------------+      +------------------------+      +--------------------+
```

- **클라이언트 (Client):** 사용자가 직접 상호작용하는 웹 브라우저.
- **Next.js 애플리케이션 (Frontend & API Layer):**
    - **프론트엔드:** React 컴포넌트로 구성된 UI를 사용자에게 제공한다.
    - **API 계층 (프록시):** Next.js의 API Routes를 서버리스 함수로 사용하여 클라이언트의 요청을 받아 외부 LLM API로 전달하는 프록시 역할을 수행한다. API 키와 같은 민감 정보를 안전하게 관리한다.
- **외부 서비스 (External Service):** 실제 AI 연산을 수행하는 외부 LLM API.

## 4. 주요 구성 요소
### 4.1. 클라이언트 애플리케이션 (Client Application)
- **역할:** 사용자 인터페이스 제공, 사용자 입력 처리, 결과 데이터 시각화.
- **구현:** Next.js와 React를 사용하여 구현된 단일 페이지 애플리케이션(SPA).
- **주요 모듈:**
    - **UI 렌더링 모듈:** 사용자의 요청에 따라 적절한 페이지와 컴포넌트를 렌더링.
    - **상태 관리 모듈:** 사용자의 입력, API 호출 상태(로딩, 성공, 실패), 결과 데이터를 관리.
    - **API 통신 모듈:** 내부 API 계층(Next.js API Routes)에 HTTP 요청을 전송.

### 4.2. API 계층 (API Layer)
- **역할:** 클라이언트와 외부 LLM 서비스 간의 안전한 중계자. 비즈니스 로직(프롬프트 생성) 처리.
- **구현:** Next.js API Routes를 활용한 서버리스 함수.
- **주요 기능:**
    - **인증 및 보안:** 외부로 노출되어서는 안 되는 LLM API 키를 서버 환경 변수로 안전하게 관리.
    - **프롬프트 엔지니어링:** 클라이언트로부터 받은 데이터를 바탕으로 LLM이 이해할 수 있는 최적의 프롬프트를 동적으로 생성.
    - **데이터 변환:** LLM API의 응답을 클라이언트가 사용하기 쉬운 포맷(JSON)으로 가공하여 전달.

### 4.3. 외부 LLM 서비스 (External LLM Service)
- **역할:** 자연어 처리 및 콘텐츠 생성.
- **선택:** OpenAI(GPT), Google(Gemini) 등 프로젝트 요구사항에 맞는 모델을 선택.
- **연동:** API 계층에서 HTTP 클라이언트를 통해 REST API 방식으로 연동.

## 5. 데이터 흐름
1. **사용자 입력:** 사용자가 웹 UI에서 텍스트(상황, 문장 등)를 입력하고 '생성' 버튼을 클릭한다.
2. **내부 API 호출:** 클라이언트 애플리케이션은 사용자의 입력을 담아 내부 API 계층(예: `/api/generate`)에 POST 요청을 보낸다.
3. **프롬프트 생성:** API 계층은 수신한 데이터를 기반으로 LLM에 전달할 프롬프트를 생성한다.
4. **외부 API 호출:** API 계층이 LLM API 키와 생성된 프롬프트를 사용하여 외부 LLM 서비스에 API를 호출한다.
5. **결과 수신:** LLM 서비스는 요청을 처리하고 생성된 텍스트를 응답으로 반환한다.
6. **데이터 가공 및 전달:** API 계층은 LLM의 응답을 파싱하고 클라이언트가 사용하기 좋은 JSON 형식으로 가공하여 클라이언트에 전달한다.
7. **결과 표시:** 클라이언트는 수신한 데이터를 UI에 렌더링하여 사용자에게 보여준다.

## 6. 기술 스택
- **프레임워크:** Next.js (React 포함)
- **언어:** TypeScript
- **테스트:** Jest, React Testing Library
- **배포/호스팅:** Vercel, Netlify 등 서버리스 함수를 지원하는 플랫폼

## 7. 비기능 요구사항
- **성능:** 사용자의 요청 후 5초 이내에 결과가 표시되어야 한다. (단, 외부 LLM API의 응답 시간에 의존적)
- **보안:** LLM API 키는 클라이언트에 노출되지 않고 서버리스 함수 내에서만 사용되어야 한다.
- **확장성:** 기능 추가 시, 새로운 페이지와 API Route를 추가하는 방식으로 수평적 확장이 용이하다.
